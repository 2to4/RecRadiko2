# RecRadiko2 環境設定チェックリスト

## ✅ **必須設定項目**

### 1. Apple Developer アカウント
- [ ] Xcode > Settings > Accounts でApple IDログイン済み
- [ ] 開発チームが表示されている
- [ ] Apple Development証明書が自動生成されている

### 2. プロジェクト設定
- [ ] RecRadiko2 target > Signing & Capabilities 設定完了
- [ ] Team が正しく選択されている
- [ ] "Automatically manage signing" が有効
- [ ] Bundle Identifier: `com.futo4.app.RecRadiko2`

### 3. 証明書確認
```bash
# コード署名証明書の確認
security find-identity -v -p codesigning
# 結果: "Apple Development: [Your Name] ([Team ID])" が表示される
```

### 4. テスト実行確認
```bash
# Xcodeでのテスト実行
# ⌘+U (Cmd+U) または Product > Test

# コマンドラインでのテスト実行
xcodebuild test -project RecRadiko2.xcodeproj -scheme RecRadiko2 -destination 'platform=macOS'
```

## 🔧 **トラブルシューティング**

### errSecInternalComponent エラー
1. キーチェーンアクセス.app を開く
2. 「証明書」カテゴリで古いApple Development証明書を削除
3. Xcode > Settings > Accounts で Apple ID を一度削除して再追加
4. プロジェクトでTeamを再選択

### UIテストの署名エラー
- RecRadiko2UITests target も同じTeamに設定する
- "Automatically manage signing" を両方のtargetで有効にする

### 代替テスト実行方法
```bash
# コード署名を無効化（開発時のみ）
xcodebuild test -project RecRadiko2.xcodeproj -scheme RecRadiko2 \
  -destination 'platform=macOS' \
  CODE_SIGNING_REQUIRED=NO \
  CODE_SIGN_IDENTITY='' \
  ENABLE_HARDENED_RUNTIME=NO
```

## 📊 **Phase 2 テスト状況**

### 実装済みテスト
- ✅ TimeConverterTests.swift
- ✅ AuthInfoTests.swift
- ✅ CacheServiceTests.swift
- ✅ MockHTTPClient.swift
- ✅ RadikoAuthServiceTests.swift
- ✅ RadikoXMLParserTests.swift
- ✅ RecRadiko2Tests.swift（統合テスト）

### 期待される結果
- 全テスト成功
- カバレッジ90%以上
- 警告ゼロ
- TDD手法の完全適用

## 🎯 **次のステップ**

環境設定完了後：
1. テスト実行・結果確認
2. カバレッジ測定
3. Phase 2完了
4. Phase 3（録音機能）開始